<!DOCTYPE html>
<html lang="de-DE">
  <head>
    <!-- Zeichencodierung festlegen, hier UTF-8 -->
    <meta charset="utf-8">
    
    <!-- Titel der Seite -->
    <title>Z√§hlerstand-Rechner</title>

    <!-- Meta-Informationen √ºber den Autor und das Erstellungsdatum -->
    <meta name="author" content="Thomas Boettcher">
    <meta name="created" content="2025-04-01T07:33:03">
    
    <!-- Bootstrap CSS einbinden f√ºr Styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Eigene Styles -->
    <style>
      /* Text in Formulareingabefelder rechtsb√ºndig ausrichten */
      .form-control { text-align: right; }

      /* Breite und Maximale Breite der Tabelle festlegen */
      .table-custom { width: 100%; max-width: 750px; margin: auto; }

      /* Cursor f√ºr Tooltip anzeigen */
      .tooltip-label { cursor: help; }

      /* Stil f√ºr ung√ºltige Eingaben */
      .is-invalid { border-color: red; }

      /* Stil f√ºr negative Werte, Optional: Hervorhebung durch Fettschrift */
      .negative { color: red; font-weight: bold; }
      
      /* Optional: F√ºr zus√§tzliche Hervorhebung bei √úberlauf */
      .overflow { color: orange; font-weight: bold; }

      /* Stil f√ºr die Tabelle */
      .hero-container { display: flex; justify-content: center; align-items: center; height: 80vh; }
      .left-column { flex: 2; padding-right: 20px; }
      .right-column { /*flex: 1; padding-left: 20px;*/ display: flex; flex-direction: column; justify-content: flex-start; margin-top: 3rem; /* H√∂he der √úberschrift ausgleichen */ }

      .table>tbody {  vertical-align: middle; }

      output {
        width: 100%;                  /* Volle Breite wie Input */
        padding: 8px 12px;            /* Innenabstand */
        border: 1px solid #ccc;       /* Rahmen */
        border-radius: 4px;           /* Abgerundete Ecken */
        background-color: #fff;       /* Hintergrundfarbe */
        font-family: inherit;         /* Schriftart erben */
        font-size: 1rem;              /* Schriftgr√∂√üe */
        color: #333;                  /* Schriftfarbe */
        box-shadow: none;             /* Keine Schatten */
        display: inline-block;        /* Verhalten wie Input */
        outline: none;                /* Entfernt Standard-Outline */
      }

      .table-success td .d-flex {
        display: flex;                  /* Flexbox-Container */
        justify-content: space-between; /* Elemente gleichm√§√üig verteilen */
        align-items: center;            /* Vertikal zentrieren */
      }

      .table-success td a,
      .table-success td span {
        margin: 0 8px;                 /* Abst√§nde zwischen den Elementen */
      }
      
      .info-text {color:#0dcaf0;}

    </style>

  </head>
  <body>

    <div class="container my-5 hero-container">
      <!-- Hero-Bereich mit flexbox -->
      <div class="row">
        <!-- Tabelle im linken Bereich -->
        <div class="col-md-9 left-column">
          <!-- √úberschrift der Seite -->
          <h1 class="text-center mb-4" role="heading" aria-level="1">&#147;Sch√§tztabelle&#148;</h1>
          
          <!-- Tabelle f√ºr die Eingabefelder -->
          <div class="table-responsive">
            <!-- 
              Formular f√ºr die Z√§hlerstand-Berechnung
              - Enth√§lt alle Eingabefelder f√ºr Z√§hlerst√§nde und Daten
              - Wird durch JavaScript validiert und berechnet
            -->
            <form id="zstcalcform" role="form" aria-label="Z√§hlerstand-Rechner">
              <!-- 
                Haupttabelle mit 6 Spalten:
                1. Kategorie (Zukunft, Aktuell, Dazwischen, Alt)
                2. Hilfesymbol (optional)
                3. Z√§hlerstand (Eingabe oder Ausgabe)
                4. Verbrauch (berechnet)
                5. Ablese-Datum (Eingabe)
                6. Tage (berechnet)
              -->
              <table class="table table-striped table-bordered table-custom border border-1" role="grid" aria-label="Z√§hlerstand-Eingaben">
                <!-- Tabellen√ºberschrift mit Spaltenbeschriftungen -->
                <thead class="table-success text-center">
                  <tr role="row">
                    <th class="text-start" role="columnheader" scope="col">Kategorie</th>
                    <th role="columnheader" scope="col"></th>
                    <th role="columnheader" scope="col">Z√§hlerstand</th>
                    <th role="columnheader" scope="col">Verbrauch*</th>
                    <th role="columnheader" scope="col">Ablese-Datum</th>
                    <th class="text-end" role="columnheader" scope="col">Tage</th>
                  </tr>
                </thead>

                <tbody>
                  <!-- 
                    Zeile "Zukunft":
                    - Zeigt gesch√§tzten Z√§hlerstand f√ºr ein zuk√ºnftiges Datum
                    - Verbrauch wird basierend auf Tagesverbrauch berechnet
                    - Tage werden vom aktuellen/zweiten Datum bis zum Zukunftsdatum berechnet
                  -->
                  <tr role="row">
                    <td role="cell">Zukunft</td>
                    <td role="cell"><!--'Btn' f√ºr Sch√§tzung--></td>
                    <td id="zstFutureOutput" class="text-end" role="cell">
                      <output id="zstFuture" type="text" class="form-control bg-transparent" name="zstBetween" aria-live="polite" readonly role="status"></output>
                    </td>
                    <td class="text-end" role="cell"><span id="verbrauchFuture" role="status"></span></td>
                    <td class="text-end" role="cell"><input type="text" id="datFutureInput" class="form-control bg-transparent" value="" aria-label="Datum Zukunft"></td>
                    <td id="daysFuture" class="text-end" role="cell"></td>
                  </tr>

                  <!-- 
                    Zeile "Aktuell":
                    - Eingabe des neuesten abgelesenen Z√§hlerstands
                    - Verbrauch wird vom alten zum aktuellen Z√§hlerstand berechnet
                    - Tage werden vom alten zum aktuellen Datum berechnet
                    - Pflichtfeld mit Validierung
                  -->
                  <tr role="row">
                    <td role="cell">Aktuell</td>
                    <td role="cell"><span class="tooltip-label" data-bs-toggle="tooltip" title="Neuesten abgelesenen Z√§hlerstand eintragen" role="tooltip" aria-label="Hilfe: Neuesten abgelesenen Z√§hlerstand eintragen">&#10067;</span></td>
                    <td role="cell">
                      <input type="text" id="zstNewInput" class="form-control" value="" aria-invalid="true" aria-describedby="zstNewFeedback" aria-label="Z√§hlerstand Aktuell">
                      <small id="zstNewFeedback" class="invalid-feedback" role="alert">Bitte gib einen g√ºltigen Z√§hlerstand ein.</small>
                    </td>
                    <td class="text-end" role="cell"><span id="verbrauchNew" role="status"></span></td>
                    <td role="cell">
                      <input type="text" id="datNewInput" class="form-control" aria-invalid="true" aria-describedby="datNewFeedback" value="" aria-label="Datum Aktuell">
                    </td>
                    <td id="daysNew" class="text-end" role="cell"></td>
                  </tr>

                  <!-- 
                    Zeile "Dazwischen":
                    - Zeigt berechneten Z√§hlerstand f√ºr ein Zwischendatum
                    - Verbrauch wird basierend auf Tagesverbrauch berechnet
                    - Tage werden vom alten/zweiten Datum bis zum Zwischendatum berechnet
                    - Optionales Feld f√ºr Zwischenberechnungen
                  -->
                  <tr role="row">
                    <td role="cell">Dazwischen</td>
                    <td role="cell"></td>
                    <td id="zstBetweenOutput" class="text-end bg-warning-subtle" role="cell">
                      <output id="zstBetween" type="text" class="form-control bg-transparent" name="zstBetween" aria-live="polite" readonly role="status"></output>
                    </td>
                    <td class="text-end" role="cell"><span id="verbrauchBetween" role="status"></span></td>
                    <td role="cell">
                      <input type="text" id="datBetweenInput" class="form-control bg-transparent" aria-invalid="true" aria-describedby="datBetweenFeedback" value="" aria-label="Datum Dazwischen">
                    </td>
                    <td id="daysBetween" class="text-end" role="cell"></td>
                  </tr>

                  <!-- 
                    Zeile "Alt":
                    - Eingabe des √§ltesten abgelesenen Z√§hlerstands
                    - Startpunkt f√ºr alle Berechnungen
                    - Standardwert: 0
                    - Pflichtfeld mit Validierung
                  -->
                  <tr role="row">
                    <td role="cell">Alt</td>
                    <td role="cell"><span class="tooltip-label" data-bs-toggle="tooltip" title="√Ñltesten abgelesenen Z√§hlerstand eintragen" role="tooltip" aria-label="Hilfe: √Ñltesten abgelesenen Z√§hlerstand eintragen">&#10067;</span></td>
                    <td role="cell">
                      <input type="text" id="zstOldInput" class="form-control" aria-invalid="true" aria-describedby="zstOldFeedback" placeholder="0" value="0" aria-label="Z√§hlerstand Alt">
                      <small id="zstOldFeedback" class="invalid-feedback" role="alert">Bitte gib einen g√ºltigen Z√§hlerstand ein.</small>
                    </td>
                    <td role="cell"></td>
                    <td role="cell"><input type="text" id="datOldInput" class="form-control" value="" aria-label="Datum Alt"></td>
                    <td role="cell"></td>
                  </tr>
                </tbody>

                <!-- 
                  Tabellenfu√ü mit:
                  - GitHub-Link
                  - Reset-Button
                  - Info-Button f√ºr Modal
                -->
                <tfoot class="table-success">
                  <tr>
                    <td colspan="6" class="text-start text-muted fs-6 py-1">
                      <div class="d-flex justify-content-between align-items-center">
                        <!-- Link zu GitHub -->
                        <a class="text-decoration-none text-muted fs-6" href="https://github.com/ztatement/ZST-Rechner">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-github pb-1" viewBox="0 0 16 16">
                            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                          </svg> Ztatement
                        </a>

                        <!-- Button zum Leeren der Inhalte -->
                        <span>
                          <button id="resetButton" class="btn btn-light text-center py-1">Inhalte leeren</button>
                        </span>

                        <!-- Link mit Info-Icon -->
                        <a class="fs-6 text-decoration-none text-muted" href="#" data-bs-toggle="modal" data-bs-target="#infoModal" aria-label="Mehr Informationen zum Z√§hlerstand-Rechner">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle text-danger" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                          </svg>
                        </a>
                      </div>
                    </td>
                  </tr>
                </tfoot>

              </table>
            </form>
          </div><!-- Tabelle Ende -->
        </div>

        <!-- Auswahlfelder im rechten Bereich -->
        <!-- Auswahl f√ºr Rundungsoptionen und Vorkommastellen -->
        <div class="col-md-3 right-column mt-5 pt-4">
          <div class="bg-light-subtle p-4 rounded">
            <h2 class="text-center">Einstellungen</h2>
            <!-- Rundungsoptionen -->
            <div class="mb-3">
              <label for="roundingOption" class="form-label">Rundungsoption</label>
              <select id="roundingOption" class="form-select">
                <option value="standard" selected>Kaufm√§nnisch runden</option>
                <option value="floor">Immer abrunden</option>
                <option value="none">Keine Rundung</option>
              </select>
            </div>
            <!-- Vorkommastellen -->
            <div class="mb-3">
              <label for="vorkommastellenOption" class="form-label">Vorkommastellen</label>
              <select id="vorkommastellenOption" class="form-select">
                <option value="5">5 Vorkommastellen</option>
                <option value="6" selected>6 Vorkommastellen</option>
              </select>
            </div>
            <!-- Wintermodus an / aus -->
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="winterModeCheckbox">
              <label class="form-check-label" for="winterModeCheckbox">Wintermodus</label>
            </div>

          </div>
        </div>
      </div>
      
      <!-- Modal -->
      <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="infoModalLabel">Informationen zum Z√§hlerstand-Rechner</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schlie√üen"></button>
            </div>
            <div class="modal-body">

            <p><strong>Z√§hlerstand-Rechner ‚Äì Ihr Tool zur Verbrauchskontrolle</strong></p>

            <p>Mit diesem <strong>Z√§hlerstand-Rechner</strong> k√∂nnen Sie schnell und einfach Ihren Energie- oder Gasverbrauch berechnen und Zwischenst√§nde sch√§tzen. Das Tool hilft Ihnen, den √úberblick √ºber Ihren Verbrauch zu behalten ‚Äì perfekt f√ºr Abrechnungen, Prognosen oder einfach zur besseren Kontrolle der Kosten.</p>

            <p><strong>Was der Rechner kann:</strong></p>
            <ul>
              <li><strong>Eingabepr√ºfung:</strong> 
                <ul>
                  <li>Automatische √úberpr√ºfung von Z√§hlerst√§nden und Datumsformaten (z. B. <code>12.05.2024</code> oder <code>1.234,567</code>).</li>
                  <li>Direkte Fehlermeldungen bei falschen Eingaben (z. B. ung√ºltige Zahlen oder fehlende Daten).</li>
                </ul>
              </li>
              <li><strong>Verbrauch & Zwischenst√§nde berechnen:</strong>
                <ul>
                  <li>Berechnet den <strong>Verbrauch</strong> zwischen zwei Zeitpunkten (z. B. zwischen "Alt" und "Aktuell").</li>
                  <li>Sch√§tzt <strong>Zwischenst√§nde</strong> f√ºr beliebige Daten ‚Äì ideal f√ºr zuk√ºnftige Ablesungen.</li>
                  <li>Ber√ºcksichtigt <strong>Z√§hler√ºberl√§ufe</strong>, z.B. bei 99.999 oder falls ein Digital-Z√§hler zur√ºckgesetzt wurde.</li>
                </ul>
              </li>
              <li><strong>Optionale Anpassungen:</strong>
                <ul>
                  <li><strong>Wintermodus:</strong> Automatische Ber√ºcksichtigung eines Mehrverbrauchs von 2 %, angepasst f√ºr die Wintermonate November bis Februar. Die Berechnung erfolgt auf Basis der tats√§chlichen Verbrauchstage in diesem Zeitraum und ber√ºcksichtigt damit z.B.Heizkosten pr√§zise. Die Berechnung wird nicht pauschal auf den gesamten Zeitraum angewendet.</li>
                  <li><strong>Rundungsoptionen:</strong>
                    <ul>
                      <li><em>Kaufm√§nnisch</em> (Standard).</li>
                      <li><em>Immer abrunden</em> (vorsichtige Sch√§tzung).</li>
                      <li><em>Keine Rundung</em> (exakte Werte, max. 3 Nachkommastellen).</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><strong>Einfache Bedienung & hilfreiche Funktionen:</strong>
                <ul>
                  <li><strong>Erkl√§rungen direkt im Tool:</strong> Fragezeichen-Symbole (‚ùì) neben Eingabefeldern erkl√§ren, was einzutragen ist.</li>
                  <li><strong>Deutsches Format:</strong> Alle Eingaben ‚Äì Z√§hlerst√§nde und Datumsangaben ‚Äì sind direkt an deutsche Gewohnheiten angepasst.</li>
                </ul>
              </li>
            </ul>

            <p><strong>Wichtige Hinweise:</strong></p>
            <ul>
              <li><strong>Pflichtfelder:</strong> Ohne die Eingabe des <em>aktuellen Z√§hlerstands</em> und eines <em>Datums</em> bleiben die Ergebnisse leer.</li>
              <li><strong>Leeres Formular:</strong> Falls wichtige Daten fehlen, wird dies klar angezeigt ‚Äì nichts geht verloren.</li>
            </ul>

            <p><strong>So funktioniert es ‚Äì Beispiel:</strong></p>
            <p>Tragen Sie z.B. Ihren letzten Z√§hlerstand ("Alt") sowie den aktuellen Wert ein ‚Äì der Rechner berechnet Ihren Verbrauch und gibt Ihnen eine Prognose f√ºr einen zuk√ºnftigen Z√§hlerstand. (z.B. n√§chste Abrechnung wenn Sie ein Datum in die Zukunft angeben.)</p>

            <p><strong>F√ºr wen ist das Tool geeignet?</strong></p>
            <ul>
              <li>Ideal f√ºr Haushalte, die ihren Verbrauch im Blick behalten m√∂chten ‚Äì sei es f√ºr die <strong>Nebenkostenabrechnung</strong> (zu einem bestimmtem Datum), die <strong>Heizungskosten</strong> oder einfach zur besseren Kontrolle des eigenen Energieverbrauchs.</li>
            </ul>

            <p>Nutzen Sie das Tool und verschaffen Sie sich volle Transparenz √ºber Ihre Verbrauchsdaten! üòä</p>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Schlie√üen</button>
            </div>
          </div>
        </div>
      </div><!-- ./Modal -->
    </div><!-- ./container End -->

    <!-- Footer mit Links, Bootstrap JavaScript -->
    <footer>
      
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
              integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      <!--script src="zst-rechner_min.js"></script-->
      <script src="zst-rechner.js"></script>

      <script>
      document.getElementById('resetButton').addEventListener('click', function () {
        location.reload(); // Aktualisiert die Seite
      });
      
      const modalElement = document.getElementById('infoModal');
      const modalTitle = document.getElementById('infoModalLabel');
      const closeButton = modalElement.querySelector('.btn-close');
      const modalFooterButton = modalElement.querySelector('.modal-footer .btn');
      const infoLink = document.querySelector('a[data-bs-toggle="modal"]');

      // Event-Listener f√ºr das vollst√§ndige Ausblenden des Modals
      modalElement.addEventListener('hidden.bs.modal', function (event) {
        // Warte einen kurzen Moment, bevor der Fokus gesetzt wird
        requestAnimationFrame(() => {
          infoLink.focus();
        });
      });
      </script>
    </footer>

  </body>
</html>
